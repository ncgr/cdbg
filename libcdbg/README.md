libcdbg is a refactoring of the data structures and io components of the "a4"
algorithm from _A representation of a compressed de Bruijn graph for pan-genome
analysis that enables search_.
Specifically, the library provides streams for reading/writing the implicit
(`.bin`) and explicit (`.dot`) de Bruijn graph file types generated by cdbg.
These files are read into their corresponding data structures, which are also
provided by the library.

Though this is a refactoring of an existing tool, the existing functionality
will be revised and new functionality will be added.
So the tool may contain bugs and the instructions on how to use it are subject
to change.

## Compiling

libcdbg is implemented in C++11.
The `Makefile` is configured to use g++ and ar and assumes they are in your path.

cdbg's only dependency is the
[Succinct Data Structure Library](https://github.com/simongog/sdsl-lite)
(sdsl-lite), which can be easily installed on any Unix style system.

Once sdsl-lite is installed, you can compile libcdbg with the `make` command.
This will create a `libcdbg.a` archive file in the `lib/` directory.


## Usage

libcdbg exposes four header files: `cdbg/cdbg.hpp`, `cdbg/partial_lcp.hpp`,
`cdbg/io/implicit_stream.hpp`, and `cdbg/io/explicit_stream.hpp`.
`cdbg/cdbg.hpp` contains the actual `CDBG` and `node` data structures, which
the implicit and explicit files are loaded into, respectively.
`cdbg/partial_lcp.hpp` contains an implementation of an algorithm that
constructs an SDSL compatible partial longest common prefix array that's
required by `cdbg/cdbg.hpp`.
`cdbg/io/implicit_stream.hpp` contains functions for reading and writing the
`CDBG` data structure to and from `.bin` files.
And `cdbg/io/explicit_stream.hpp` contains functions for reading and writing a
`std::vector<node>` to and from `.dot` files.

The following C++ example reads a de Bruijn graph `.bin` file using the implicit
input stream and writes it to a `.dot` file using the explicit output stream.

```cpp
#include <iostream>
#include <tuple>
#include <vector>
#include "cdbg/cdbg.hpp"
#include "cdbg/io/explicit_stream.hpp"
#include "cdbg/io/implicit_stream.hpp"

using std::cerr;
using std::endl;
using std::tie;
using std::vector;
using cdbg::CDBG;
using cdbg::node;
using cdbg::io::load_implicit;
using cdbg::io::store_graph;

int main(int argc, char* argv[])
{
  if (argc != 3) {
    cerr << "Usage: " << argv[0] << " BIN_FILE DOT_FILE" << endl;
    return -1;
  }
  CDBG implicit_g = load_implicit(argv[1]);
  vector<node> explicit_g;
  vector<uint64_t> start_nodes;
  tie(explicit_g, start_nodes) = impicit_g.get_explicit_representation();
  store_graph(explicit_g, argv[2]);
  return 0;
}
```
